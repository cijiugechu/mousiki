# SILK Porting Status

## Current Rust Coverage
- `src/silk/mod.rs` exposes the `codebook`, `decoder`, `icdf`, `interpolate`, and `sum_sqr_shift` modules, re-exporting the `FrameSignalType`, `FrameQuantizationOffsetType`, and `MAX_LPC_ORDER` items used when parsing the bitstream.【src/silk/mod.rs†L1-L18】
- `src/silk/icdf.rs` ports the inverse cumulative distribution function tables that drive entropy decoding of gains, LSF codebooks, LTP parameters, and related side information.【src/silk/icdf.rs†L1-L185】
- `src/silk/codebook.rs` mirrors the SILK stage-two LSF vector-quantiser tables used during decoding.【src/silk/codebook.rs†L1-L200】
- `src/silk/decoder.rs` implements parts of the SILK frame decoder, including routines for classifying frame types, decoding gain and LSF indices, reconstructing LPC coefficients, recovering pitch lags, and synthesising excitation via LTP; it also contains helper data structures such as `Decoder`, `DecoderBuilder`, `ShellBlockCounts`, `ExcitationQ23`, and `PitchLagInfo`.【src/silk/decoder.rs†L200-L700】
- `src/silk/decoder_state.rs` mirrors the `silk_decoder_state` and `silk_PLC_struct` layouts, exposing typed fields for the excitation buffers, side-information indices, PLC scratch space, and comfort-noise statistics so that future decoder helpers can mutate the same state the C implementation expects.【src/silk/decoder_state.rs†L21-L225】
- `src/silk/decoder_control.rs` mirrors the `silk_decoder_control` descriptor consumed by the inverse NSQ, PLC, and CNG helpers, exposing typed arrays for the per-subframe pitch lags, predictor gains, LPC coefficients, and LTP metadata.【src/silk/decoder_control.rs†L1-L34】【opus-c/silk/structs.h†L330-L358】
- `src/silk/encoder/state.rs` mirrors the encoder-side `silk_encoder_state` and the multi-channel `silk_encoder` super-structure, exposing `EncoderStateCommon`, `EncoderChannelState`, and the top-level `Encoder` wrapper so future encoder helpers can reuse the same bandwidth, resampler, and stereo bookkeeping as the C implementation.【src/silk/encoder/state.rs†L134-L472】【opus-c/silk/structs.h†L150-L260】【opus-c/silk/fixed/structs_FIX.h†L54-L123】
- `src/silk/encoder/control.rs` ports the per-frame `silk_encoder_control_FIX` layout, providing typed access to the predictor coefficients, LTP metadata, unquantised gains, and residual-energy scratch buffers that the encoder helpers share across the analysis pipeline.【src/silk/encoder/control.rs†L1-L56】【opus-c/silk/fixed/structs_FIX.h†L93-L122】
- `src/silk/decoder_set_fs.rs` mirrors the `silk_decoder_set_fs` helper, reinitialising the decoder resampler, pitch-contour tables, NLSF codebooks, and LTP/LPC state when the internal sample rate changes.【src/silk/decoder_set_fs.rs†L1-L220】【opus-c/silk/decoder_set_fs.c†L33-L134】
- `src/silk/init_decoder.rs` ports `silk_reset_decoder` and `silk_init_decoder`, clearing the Rust decoder state, refreshing the comfort-noise and PLC helpers, and re-detecting the host architecture exactly like the reference implementation.【src/silk/init_decoder.rs†L1-L58】【opus-c/silk/init_decoder.c†L38-L87】
- `src/silk/load_osce_models.rs` mirrors the decoder helper that loads optional OSCE model blobs, returning `SilkError::NoError` when OSCE support is disabled just like `silk_LoadOSCEModels`.【src/silk/load_osce_models.rs†L1-L36】【opus-c/silk/dec_API.c†L64-L78】
- `src/silk/get_decoder_size.rs` mirrors `silk_Get_Decoder_Size`, reporting the number of bytes required to hold the Rust decoder super-structure before initialisation so callers can preallocate buffers exactly like the reference API.【src/silk/get_decoder_size.rs†L1-L23】【opus-c/silk/dec_API.c†L86-L99】
- `src/silk/get_encoder_size.rs` mirrors `silk_Get_Encoder_Size`, reporting the bytes required for the Rust `Encoder` super-structure before initialisation so callers can allocate encoder state just like `enc_API.c`.【src/silk/get_encoder_size.rs†L1-L35】【opus-c/silk/enc_API.c†L60-L69】
- `src/silk/init_encoder.rs` ports `silk_init_encoder`, zeroing each channel’s encoder state, seeding the adaptive high-pass smoother, and reinitialising the VAD just like the reference helper before encoding resumes.【src/silk/init_encoder.rs†L1-L38】【opus-c/silk/init_encoder.c†L36-L84】
- `src/silk/decode_indices.rs` mirrors `silk_decode_indices`, decoding the frame signal type, quantisation gains, NLSF/NLSF-interpolation indices, voiced-frame pitch lags, LTP metadata, and the entropy seed from the SILK range decoder so downstream helpers can reconstruct the same side information as the reference implementation.【src/silk/decode_indices.rs†L1-L275】【opus-c/silk/decode_indices.c†L35-L152】
- `src/silk/decode_frame.rs` mirrors `silk_decode_frame`, orchestrating the range-decoded side information, pulse expansion, inverse NSQ, PLC, output buffering, and comfort-noise synthesis so that single-channel frames follow the same control flow as `silk/decode_frame.c`.【src/silk/decode_frame.rs†L1-L210】【opus-c/silk/decode_frame.c†L33-L167】
- `src/silk/dec_api.rs` ports the public `silk_Decode` entry point together with the decoder super-structure, per-call control struct, and resampling logic so that range-decoded frames, PLC/CNG glue, stereo reconstruction, and API buffering follow the same flow as `silk/dec_API.c`.【src/silk/dec_api.rs†L1-L420】【opus-c/silk/dec_API.c†L33-L420】
- `src/silk/encode_indices.rs` mirrors the encoder-side `silk_encode_indices`, emitting the same signal-type, gain, NLSF, pitch/LTP, and seed side information via the `RangeEncoder`, including the delta-lag shortcut and NLSF-extension paths used by the C helper.【src/silk/encode_indices.rs†L1-L240】【opus-c/silk/encode_indices.c†L35-L200】
- `src/silk/encode_pulses.rs` mirrors `silk_encode_pulses`, shell-coding the absolute excitation magnitudes, streaming the refinement (LSB) bits, and attaching the matching entropy-coded sign sequence so that the encoded bitstream stays byte-for-byte compatible with `silk/encode_pulses.c`.【src/silk/encode_pulses.rs†L1-L271】【opus-c/silk/encode_pulses.c†L35-L196】
- `src/silk/decode_pitch.rs` mirrors `silk_decode_pitch`, converting the decoded lag and contour indices into the per-subframe pitch-lag trajectory using the same stage-two/stage-three codebooks as the C helper so the Rust decoder reuses the exact contour offsets.【src/silk/decode_pitch.rs†L1-L90】【opus-c/silk/decode_pitch.c†L1-L90】
- `src/silk/decode_parameters.rs` mirrors `silk_decode_parameters`, rebuilding the per-subframe gains, LPC predictor coefficients, pitch lags, LTP coefficients, and scaling metadata from the entropy-decoded side information so downstream decoder stages see the same parameters as the C reference implementation.【src/silk/decode_parameters.rs†L1-L222】【opus-c/silk/decode_parameters.c†L1-L104】
- `src/silk/decode_pulses.rs` mirrors `silk_decode_pulses`, reproducing the shell block rate selection, escape-coded LSB refinement, and sign decoding so the reconstructed excitation magnitudes match the reference helper bit-for-bit.【src/silk/decode_pulses.rs†L1-L210】【opus-c/silk/decode_pulses.c†L1-L94】
- `src/silk/decode_core.rs` mirrors `silk_decode_core`, running the inverse NSQ stage that applies the decoded gains, long-term prediction, and LPC synthesis to turn the reconstructed excitation into PCM output while updating the decoder history exactly like the C helper.【src/silk/decode_core.rs†L1-L320】【opus-c/silk/decode_core.c†L1-L220】
- `src/silk/errors.rs` exposes the SILK encoder and decoder error codes as the `SilkError` enum so Rust callers can mirror the reference `errors.h` failure reporting while preserving the original numeric discriminants.【src/silk/errors.rs†L1-L112】【opus-main/silk/errors.h†L1-L88】
- `src/silk/decoder/nomarlize.rs` (sic) provides Rust representations of several C helper types (`NlsfQ15`, `ResQ10`, `A32Q17`, `Aq12Coefficients`, `Aq12List`) that back the LSF interpolation logic.【src/silk/decoder/nomarlize.rs†L1-L220】
- `src/silk/sum_sqr_shift.rs` ports the fixed-point helper that accumulates the energy of 16-bit sample blocks while determining the right-shift needed to avoid 32-bit overflow, mirroring `silk_sum_sqr_shift` from the C code.【src/silk/sum_sqr_shift.rs†L1-L101】
- `src/silk/apply_sine_window.rs` mirrors the fixed-point helper that applies rising and falling sine tapers to PCM frames using the Q16 recurrence from `silk/fixed/apply_sine_window_FIX.c`, enabling deterministic windowing without heap allocations.【src/silk/apply_sine_window.rs†L8-L95】【opus-c/silk/fixed/apply_sine_window_FIX.c†L44-L101】
- `src/silk/lin2log.rs` mirrors the fixed-point approximation of `128 * log2(x)` used throughout the signal-processing helpers, matching `silk_lin2log` from the C sources.【src/silk/lin2log.rs†L1-L72】
- `src/silk/log2lin.rs` provides the companion fixed-point exponential that maps a Q7 log-domain value back to linear amplitude, matching `silk_log2lin` from the C implementation.【src/silk/log2lin.rs†L1-L71】
- `src/silk/lpc_analysis_filter.rs` mirrors the MA prediction filter that whitens input signals prior to LPC analysis, matching `silk_LPC_analysis_filter` while preserving the fixed-point wraparound semantics.【src/silk/lpc_analysis_filter.rs†L1-L96】【opus-main/silk/LPC_analysis_filter.c†L33-L108】
- `src/silk/lpc_analysis_filter_flp.rs` mirrors the floating-point LPC analysis filter specialisations, covering the 6/8/10/12/16-tap kernels from `silk/float/LPC_analysis_filter_FLP.c` so FLP analysis paths can reuse the same residual computation in Rust.【src/silk/lpc_analysis_filter_flp.rs†L1-L157】【opus-c/silk/float/LPC_analysis_filter_FLP.c†L35-L248】
- `src/silk/lpc_inv_pred_gain.rs` ports the fixed-point LPC stability check and inverse prediction gain helper used across the SILK pipeline, mirroring `silk/LPC_inv_pred_gain.c` and converting Q12 inputs to a Q30 gain output.【src/silk/lpc_inv_pred_gain.rs†L1-L209】【opus-main/silk/LPC_inv_pred_gain.c†L1-L112】
- `src/silk/lpc_inv_pred_gain_flp.rs` mirrors the floating-point LPC stability and inverse prediction gain helper, returning zero when the predictor exceeds the reference power-gain limit just like `silk/float/LPC_inv_pred_gain_FLP.c`.【src/silk/lpc_inv_pred_gain_flp.rs†L1-L98】【opus-c/silk/float/LPC_inv_pred_gain_FLP.c†L1-L73】
- `src/silk/a2nlsf.rs` mirrors the conversion from Q16 LPC prediction filter coefficients to Q15 NLSF vectors using polynomial root searches and iterative bandwidth expansion, matching `silk/A2NLSF.c`.【src/silk/a2nlsf.rs†L1-L198】
- `src/silk/find_lpc.rs` mirrors `silk_find_LPC_FIX`, running Burg analysis over the buffered frame, evaluating the interpolated NLSF candidates, and updating the encoder indices before NLSF quantisation.【src/silk/find_lpc.rs†L1-L210】【opus-c/silk/fixed/find_LPC_FIX.c†L33-L131】
- `src/silk/lpc_fit.rs` ports the coefficient scaling helper that compresses 32-bit LPC predictors into Q12 while iteratively chirping them to avoid overflow, mirroring `silk/LPC_fit.c`.【src/silk/lpc_fit.rs†L1-L123】【opus-main/silk/LPC_fit.c†L1-L86】
- `src/silk/interpolate.rs` ports the fixed-point helper that interpolates between LPC parameter vectors using a Q2 factor, mirroring `silk_interpolate` from the reference C sources.【src/silk/interpolate.rs†L1-L74】
- `src/silk/apply_sine_window_flp.rs` mirrors the floating-point sine window helper that produces rising and falling tapers for FLP buffers, matching `silk/float/apply_sine_window_FLP.c` while keeping the same four-sample recurrence.【src/silk/apply_sine_window_flp.rs†L1-L44】【opus-c/silk/float/apply_sine_window_FLP.c†L34-L80】
- `src/silk/k2a.rs` mirrors the fixed-point step-up routine that transforms reflection coefficients into LPC prediction coefficients, matching the behaviour of `silk/fixed/k2a_FIX.c`.【src/silk/k2a.rs†L1-L101】【opus-main/silk/fixed/k2a_FIX.c†L1-L57】
- `src/silk/k2a_q16.rs` mirrors the Q16 step-up routine that converts reflection coefficients to Q24 LPC predictors for the fixed-point pipeline, matching `silk/fixed/k2a_Q16_FIX.c`.【src/silk/k2a_q16.rs†L1-L92】【opus-main/silk/fixed/k2a_Q16_FIX.c†L1-L53】
- `src/silk/schur.rs` ports the fixed-point Schur recursion that derives reflection coefficients and residual energy from correlation sequences, mirroring `silk/fixed/schur_FIX.c`.【src/silk/schur.rs†L1-L90】【opus-main/silk/fixed/schur_FIX.c†L34-L106】
- `src/silk/schur64.rs` mirrors the higher-precision Schur recursion used during noise-shaping analysis, preserving the 64-bit intermediate products and instability clamps from `silk/fixed/schur64_FIX.c`.【src/silk/schur64.rs†L1-L138】【opus-c/silk/fixed/schur64_FIX.c†L1-L99】
- `src/silk/inner_prod_aligned.rs` mirrors the scaled 16-bit inner-product helper from `silk/inner_prod_aligned.c`, exposing `inner_prod_aligned_scale` for resamplers and vector kernels that need partial products.【src/silk/inner_prod_aligned.rs†L1-L71】【opus-main/silk/inner_prod_aligned.c†L1-L48】
- `src/silk/inner_product_flp.rs` ports the floating-point inner-product helper used by the SILK FLP analysis paths, accumulating the dot product with `f64` precision just like `silk_inner_product_FLP_c`.【src/silk/inner_product_flp.rs†L1-L41】【opus-c/silk/float/inner_product_FLP.c†L34-L58】
- `src/silk/vector_ops.rs` ports the fixed-point scaling and inner-product helpers from `silk/fixed/vector_ops_FIX.c`, providing `scale_copy_vector16`, `scale_vector32_q26_lshift_18`, and `inner_prod16` so predictor analysis code can reuse the shared vector math primitives without touching the C library.【src/silk/vector_ops.rs†L1-L126】【opus-c/silk/fixed/vector_ops_FIX.c†L35-L101】
- `src/silk/scale_vector.rs` mirrors the floating-point `silk_scale_vector_FLP` and `silk_scale_copy_vector_FLP` helpers so FLP-only analysis paths can rescale buffers entirely in Rust without depending on the C sources.【src/silk/scale_vector.rs†L1-L100】【opus-c/silk/float/scale_vector_FLP.c†L1-L54】【opus-c/silk/float/scale_copy_vector_FLP.c†L1-L54】
- `src/silk/energy_flp.rs` mirrors the floating-point `silk_energy_FLP` helper so FLP-only analysis and LPC routines can accumulate squared magnitudes in Rust without calling back into the C sources.【src/silk/energy_flp.rs†L1-L68】【opus-c/silk/float/energy_FLP.c†L1-L60】
- `src/silk/autocorrelation_flp.rs` mirrors the floating-point autocorrelation helper from `silk/float/autocorrelation_FLP.c`, clamping the tap count to the input length and reusing the Rust inner-product kernel to stay dependency-light.【src/silk/autocorrelation_flp.rs†L1-L62】【opus-c/silk/float/autocorrelation_FLP.c†L34-L52】
- `src/silk/corr_matrix.rs` mirrors the correlation vector/matrix builders from `silk/fixed/corrMatrix_FIX.c`, exposing `corr_vector_fix` and `corr_matrix_fix` so the encoder’s least-squares solvers can compute `X' * t` and `X' * X` entirely in Rust.【src/silk/corr_matrix.rs†L1-L189】【opus-c/silk/fixed/corrMatrix_FIX.c†L1-L169】
- `src/silk/warped_autocorrelation.rs` mirrors the warped autocorrelation helper that noise-shaping analysis relies on, matching the fixed-point pipeline in `silk/fixed/warped_autocorrelation_FIX.c` and re-exposing `MAX_SHAPE_LPC_ORDER`.【src/silk/warped_autocorrelation.rs†L1-L173】【opus-c/silk/fixed/warped_autocorrelation_FIX.c†L1-L94】
- `src/silk/warped_autocorrelation_flp.rs` mirrors the floating-point warped autocorrelation helper that feeds the FLP noise-shaping analysis, matching the even-order all-pass recursion from `silk/float/warped_autocorrelation_FLP.c` while reusing the shared `MAX_SHAPE_LPC_ORDER` guard.【src/silk/warped_autocorrelation_flp.rs†L1-L74】【opus-c/silk/float/warped_autocorrelation_FLP.c†L1-L85】
- `src/silk/autocorr.rs` ports the fixed-point `silk_autocorr` helper, reproducing the `_celt_autocorr` scaling and headroom logic so LPC and noise-shaping analysis can obtain bounded 32-bit energy measurements in Rust.【src/silk/autocorr.rs†L1-L198】【opus-c/silk/fixed/autocorr_FIX.c†L35-L48】
- `src/silk/regularize_correlations.rs` ports the diagonal-noise injection used to stabilise correlation matrices before LPC solving, matching `silk/fixed/regularize_correlations_FIX.c`.【src/silk/regularize_correlations.rs†L1-L29】【opus-c/silk/fixed/regularize_correlations_FIX.c†L35-L47】
- `src/silk/regularize_correlations_flp.rs` mirrors the floating-point diagonal-noise injection helper, nudging the same in-place correlation matrix/vector layout as `silk/float/regularize_correlations_FLP.c`.【src/silk/regularize_correlations_flp.rs†L1-L33】【opus-c/silk/float/regularize_correlations_FLP.c†L34-L47】
- `src/silk/residual_energy16.rs` mirrors the covariance-based residual energy helper that evaluates `wxx - 2*wXx*c + c' * wXX * c` using dynamic headroom, matching `silk/fixed/residual_energy16_FIX.c`.【src/silk/residual_energy16.rs†L1-L229】【opus-c/silk/fixed/residual_energy16_FIX.c†L35-L103】
- `src/silk/residual_energy.rs` ports the half-frame LPC filtering and gain-normalised residual measurements from `silk/fixed/residual_energy_FIX.c`, reusing the Rust `lpc_analysis_filter` and `sum_sqr_shift` helpers so each subframe’s energy is scaled exactly like the reference encoder.【src/silk/residual_energy.rs†L1-L169】【opus-c/silk/fixed/residual_energy_FIX.c†L35-L108】
- `src/silk/sigm_q15.rs` ports the lookup-table-based sigmoid approximation leveraged by SILK's predictor tuning helpers, mirroring `silk_sigm_Q15` from the reference C sources.【src/silk/sigm_q15.rs†L1-L86】
- `src/silk/sort.rs` ports the insertion-sort helpers that maintain partially ordered fixed-point vectors and their indices, mirroring `silk/sort.c` alongside the floating-point variant in `silk/float/sort_FLP.c`.【src/silk/sort.rs†L1-L221】【opus-c/silk/sort.c†L40-L135】【opus-c/silk/float/sort_FLP.c†L39-L83】
- `src/silk/stereo_quant_pred.rs` ports the mid/side predictor quantisation helper that searches the stereo predictor table and emits entropy indices, mirroring `silk/stereo_quant_pred.c`.【src/silk/stereo_quant_pred.rs†L1-L139】【opus-main/silk/stereo_quant_pred.c†L34-L78】
- `src/silk/vq_wmat_ec.rs` mirrors the entropy-constrained matrix-weighted VQ search (`silk_VQ_WMat_EC_c`) that evaluates 5-tap LTP codebook rows and returns the best index, residual energy, and rate/distortion score for the encoder pipeline.【src/silk/vq_wmat_ec.rs†L1-L142】【opus-main/silk/VQ_WMat_EC.c†L29-L115】
- `src/silk/gain_quant.rs` ports the scalar gain quantisation/dequantisation routines and gain identifier helper from `silk/gain_quant.c`, preserving the encoder's hysteresis logic and delta-index bounds in Rust.【src/silk/gain_quant.rs†L1-L170】【opus-main/silk/gain_quant.c†L34-L147】
- `src/silk/stereo_ms_to_lr.rs` mirrors the adaptive mid/side to left/right conversion used during stereo decoding, porting the decoder-side state (`StereoDecState`) and exposing `StereoDecState::ms_to_lr`, a Rust translation of `silk_stereo_MS_to_LR`.【src/silk/stereo_ms_to_lr.rs†L1-L225】【opus-main/silk/stereo_MS_to_LR.c†L31-L89】
- `src/silk/stereo_decode_pred.rs` reproduces the entropy decoding of stereo predictor indices and the reconstruction of quantised mid/side predictors, mirroring `silk/stereo_decode_pred.c`.【src/silk/stereo_decode_pred.rs†L1-L118】【opus-main/silk/stereo_decode_pred.c†L28-L75】
- `src/silk/stereo_encode_pred.rs` mirrors the entropy coding of the mid/side predictor indices and the mid-only flag used during stereo encoding, matching `silk/stereo_encode_pred.c`.【src/silk/stereo_encode_pred.rs†L1-L58】【opus-main/silk/stereo_encode_pred.c†L34-L63】
- `src/silk/stereo_find_predictor.rs` ports the least-squares search that derives the mid/side prediction coefficients and smooths the mid/residual magnitudes, matching `silk/stereo_find_predictor.c`.【src/silk/stereo_find_predictor.rs†L1-L199】【opus-main/silk/stereo_find_predictor.c†L34-L115】
- `src/silk/stereo_lr_to_ms.rs` mirrors the encoder-side conversion from left/right PCM to adaptive mid/side signals, handling bitrate splitting, predictor quantisation, width smoothing, and state updates in line with `silk/stereo_LR_to_MS.c`.【src/silk/stereo_lr_to_ms.rs†L1-L349】【opus-main/silk/stereo_LR_to_MS.c†L31-L208】
- `src/silk/tables_pulses_per_block.rs` mirrors the shell coder probability tables for rate levels, pulse counts, and sign decoding, replacing the lookup data from `silk/tables_pulses_per_block.c`.【src/silk/tables_pulses_per_block.rs】
- `src/silk/shell_coder.rs` ports the hierarchical pulse shell coder that splits 16-sample blocks using precomputed iCDF tables, matching the behaviour of `silk/shell_coder.c`.【src/silk/shell_coder.rs†L1-L164】【opus-main/silk/shell_coder.c†L34-L150】
- `src/silk/code_signs.rs` ports the excitation sign entropy coder that maps shell-coded pulse magnitudes to signed excitation, mirroring `silk/code_signs.c`, and `src/silk/decoder.rs` now reuses it during excitation reconstruction.【src/silk/code_signs.rs†L1-L126】【src/silk/decoder.rs†L1329-L1356】【opus-main/silk/code_signs.c†L41-L119】
- `src/silk/tables_pitch_lag.rs` ports the iCDF tables that parameterise SILK's pitch-lag estimation and contour decoding, matching `silk/tables_pitch_lag.c`.【src/silk/tables_pitch_lag.rs†L1-L29】
- `src/silk/tables_gain.rs` mirrors the quantization gain iCDF tables and associated delta-gain bounds defined in `silk/tables_gain.c`, supplying the lookup data used when decoding independent and delta gain indices.【src/silk/tables_gain.rs†L1-L31】【opus-c/silk/tables_gain.c†L1-L55】
- `src/silk/tables_ltp.rs` ports the long-term prediction codebook probability tables, bit costs, vector-quantised taps, and gain bounds from `silk/tables_LTP.c`, enabling SILK's pitch prediction decoder to access the same lookup data as the C implementation.【src/silk/tables_ltp.rs†L1-L132】【opus-c/opus-main/silk/tables_LTP.c†L34-L294】
- `src/silk/table_lsf_cos.rs` ports the fixed-point cosine lookup table used when converting LSFs to cosines, matching the values from `silk/table_LSF_cos.c`.【src/silk/table_lsf_cos.rs†L1-L26】【opus-c/opus-main/silk/table_LSF_cos.c†L1-L69】
- `src/silk/tables_other.rs` now provides the remaining stereo predictor, LBRR flag, uniform entropy, quantisation offset, and transition filter tables sourced from `silk/tables_other.c`, along with associated constants shared across SILK's stereo and bandwidth-transition paths.【src/silk/tables_other.rs†L1-L75】
- `src/silk/tuning_parameters.rs` exposes the encoder tuning constants formerly defined in `silk/tuning_parameters.h`, covering pitch analysis, VAD thresholds, noise shaping, and bandwidth transition limits.【src/silk/tuning_parameters.rs†L1-L87】【opus-main/silk/tuning_parameters.h†L1-L141】
- `src/silk/pitch_est_tables.rs` exposes the stage-two and stage-three pitch estimator codebooks, search ranges, and bias constants used during SILK lag refinement, mirroring `silk/pitch_est_tables.c` and `silk/pitch_est_defines.h` from the reference sources.【src/silk/pitch_est_tables.rs†L1-L143】【opus-c/opus-main/silk/pitch_est_tables.c†L1-L99】【opus-c/opus-main/silk/pitch_est_defines.h†L1-L86】
- `src/silk/quant_ltp_gains.rs` ports the encoder-side LTP gain quantiser that searches the three codebooks via the entropy-constrained VQ helper and updates the cumulative gain bounds, mirroring `silk/quant_LTP_gains.c`.【src/silk/quant_ltp_gains.rs†L1-L213】【opus-c/silk/quant_LTP_gains.c†L1-L200】
- `src/silk/ltp_scale_ctrl.rs` mirrors the encoder helper that selects the long-term prediction scaling index from the predicted coding gain, packet-loss heuristics, and SNR targets, returning the same Q14 scaling factors as `silk_LTP_scale_ctrl_FIX`.【src/silk/ltp_scale_ctrl.rs†L1-L145】【opus-c/silk/fixed/LTP_scale_ctrl_FIX.c†L35-L65】
- `src/silk/ltp_analysis_filter.rs` ports the fixed-point LTP analysis filter that removes the long-term prediction contribution and scales the resulting residual by the inverse quantisation gains, matching `silk_LTP_analysis_filter_FIX`.【src/silk/ltp_analysis_filter.rs†L1-L194】【opus-c/silk/fixed/LTP_analysis_filter_FIX.c†L34-L87】
- `src/silk/tables_nlsf_cb_wb.rs` mirrors the wideband NLSF stage-one and stage-two codebook tables, exposing the `SilkNlsfCb` metadata wrapper that the decoder uses during entropy decoding, matching the contents of `silk/tables_NLSF_CB_WB.c`.【src/silk/tables_nlsf_cb_wb.rs†L1-L260】【opus-main/silk/tables_NLSF_CB_WB.c†L1-L226】
- `src/silk/tables_nlsf_cb_nb_mb.rs` ports the narrowband and mediumband NLSF codebook tables, reusing the shared `SilkNlsfCb` metadata to expose stage-one vectors, weighting factors, entropy tables, and delta constraints mirrored from `silk/tables_NLSF_CB_NB_MB.c`.【src/silk/tables_nlsf_cb_nb_mb.rs†L1-L214】【opus-main/silk/tables_NLSF_CB_NB_MB.c†L33-L149】
- `src/silk/nlsf_unpack.rs` mirrors the `silk_NLSF_unpack` helper that derives stage-two entropy table indices and predictor entries from the codebook metadata, matching the logic in `silk/NLSF_unpack.c`.【src/silk/nlsf_unpack.rs†L1-L86】【opus-main/silk/NLSF_unpack.c†L33-L63】
- `src/silk/nlsf_vq.rs` mirrors the quantisation-error helper that accumulates weighted absolute prediction residuals for each NLSF codebook vector, matching `silk/NLSF_VQ.c`.【src/silk/nlsf_vq.rs†L1-L116】【opus-main/silk/NLSF_VQ.c†L31-L68】
- `src/silk/nlsf_vq_weights_laroia.rs` ports the Laroia low-complexity weighting helper used to derive NLSF vector-quantiser weights from Q15 LSF inputs, matching `silk/NLSF_VQ_weights_laroia.c`.【src/silk/nlsf_vq_weights_laroia.rs†L1-L82】【opus-main/silk/NLSF_VQ_weights_laroia.c†L1-L83】
- `src/silk/nlsf_stabilize.rs` mirrors the in-place stabilisation helper that enforces minimum deltas and guard bands on decoded NLSF vectors, matching `silk/NLSF_stabilize.c`.【src/silk/nlsf_stabilize.rs†L1-L147】【opus-main/silk/NLSF_stabilize.c†L1-L155】
- `src/silk/nlsf_decode.rs` ports the predictive stage-two NLSF decoder that reconstructs quantised NLSF coefficients (Q15) from codebook indices, mirroring `silk/NLSF_decode.c` while reusing the existing unpacking and stabilisation helpers.【src/silk/nlsf_decode.rs†L1-L133】【opus-main/silk/NLSF_decode.c†L33-L103】
- `src/silk/nlsf_del_dec_quant.rs` mirrors the delayed-decision trellis quantiser for NLSF residuals, faithfully reproducing the fixed-point search and rate computation performed in `silk/NLSF_del_dec_quant.c`.【src/silk/nlsf_del_dec_quant.rs†L1-L229】【opus-c/silk/NLSF_del_dec_quant.c†L33-L213】
- `src/silk/nlsf_encode.rs` wires the entire two-stage NLSF encoder—stabilisation, survivor selection, delayed-decision residual quantisation, and reconstruction—matching `silk/NLSF_encode.c` while exposing a safe Rust API used by encoder-side helpers.【src/silk/nlsf_encode.rs†L1-L233】【opus-c/silk/NLSF_encode.c†L33-L164】
- `src/silk/nlsf2a.rs` ports the conversion from decoded NLSF vectors to Q12 LPC predictor coefficients using polynomial root searches and iterative bandwidth expansion, matching `silk/NLSF2A.c`.【src/silk/nlsf2a.rs†L1-L169】【opus-main/silk/NLSF2A.c†L1-L168】
- `src/silk/process_nlsfs.rs` mirrors `silk_process_NLSFs`, recomputing the Laroia weighting, running the two-stage NLSF encoder, and converting the (optionally interpolated) NLSF vectors back to LPC predictors for each half-frame so the encoder drives the same side-information indices as the reference implementation.【src/silk/process_nlsfs.rs†L1-L228】【opus-c/silk/process_NLSFs.c†L33-L101】
- `src/silk/process_gains.rs` ports `silk_process_gains_FIX`, clamping the residual-scaled gains, running the LTP-dependent gain reduction for voiced frames, quantising the subframe gains, and updating the lambda/quantisation-offset bookkeeping exactly like the C encoder pipeline.【src/silk/process_gains.rs†L1-L213】【opus-c/silk/fixed/process_gains_FIX.c†L33-L115】
- `src/silk/find_ltp.rs` mirrors the `silk_find_LTP_FIX` builder, assembling the per-subframe correlation matrices and vectors that feed the LTP gain quantiser before vector-quantising the predictor taps.【src/silk/find_ltp.rs†L1-L152】【opus-c/silk/fixed/find_LTP_FIX.c†L35-L110】
- `src/silk/find_pred_coefs.rs` mirrors `silk_find_pred_coefs_FIX`, splitting the voiced/unvoiced paths, quantising and scaling the LTP predictors, rebuilding the LPC taps via `find_LPC`, and measuring the residual energy so later encoder helpers can reuse the same fixed-point state as the C implementation.【src/silk/find_pred_coefs.rs†L1-L243】【opus-c/silk/fixed/find_pred_coefs_FIX.c†L35-L140】
- `src/silk/resampler.rs` ports the top-level `silk_resampler_init` and `silk_resampler` entry points, handling delay compensation and dispatching to the fractional kernels mirrored from `silk/resampler.c`.【src/silk/resampler.rs†L1-L353】【opus-c/opus-main/silk/resampler.c†L1-L196】
- `src/silk/resampler_down2.rs` ports the fixed-point 2× downsampler used by SILK's resampling pipeline, mirroring the all-pass structure in `silk/resampler_down2.c` and relying on the ROM coefficients from `silk/resampler_rom.h`.【src/silk/resampler_down2.rs†L1-L82】
- `src/silk/resampler_down2_3.rs` mirrors the low-complexity 2/3 downsampler that combines the shared AR section with a four-tap FIR interpolator, matching `silk/resampler_down2_3.c` and reusing the ROM coefficients already exposed in `resampler_rom`.【src/silk/resampler_down2_3.rs†L1-L170】【opus-main/silk/resampler_down2_3.c†L26-L118】
- `src/silk/resampler_private_ar2.rs` ports the single-delay, second-order AR filter that prepares Q8 intermediate samples for the SILK resamplers, matching `silk/resampler_private_AR2.c`.【src/silk/resampler_private_ar2.rs†L1-L34】【opus-c/silk/resampler_private_AR2.c†L35-L54】
- `src/silk/resampler_private_down_fir.rs` mirrors the hybrid IIR/FIR polyphase downsampler used for fractional decimation ratios, translating the buffering, interpolation, and state-handling logic from `silk/resampler_private_down_FIR.c`.【src/silk/resampler_private_down_fir.rs†L1-L213】【opus-c/silk/resampler_private_down_FIR.c†L1-L180】
- `src/silk/resampler_private_iir_fir.rs` ports the hybrid IIR/FIR resampler that upsamples via the shared HQ all-pass sections before performing 1/12-phase FIR interpolation, matching `silk/resampler_private_IIR_FIR.c`.【src/silk/resampler_private_iir_fir.rs†L1-L238】【opus-main/silk/resampler_private_IIR_FIR.c†L1-L110】
- `src/silk/resampler_private_up2_hq.rs` reproduces the high-quality 2× upsampler that cascades first-order all-pass sections per branch and wraps the six-element delay line in `ResamplerStateUp2Hq`, mirroring `silk/resampler_private_up2_HQ.c`.【src/silk/resampler_private_up2_hq.rs†L1-L120】
- `src/silk/ana_filt_bank_1.rs` mirrors the two-band analysis filter bank that splits audio into low and high components using first-order all-pass sections, matching `silk/ana_filt_bank_1.c`.【src/silk/ana_filt_bank_1.rs†L1-L118】【opus-main/silk/ana_filt_bank_1.c†L1-L78】
- `src/silk/biquad_alt.rs` reproduces the alternative second-order ARMA filter used during resampling and bandwidth switching, handling both stride-one and stride-two sample layouts exactly as in `silk/biquad_alt.c`.【src/silk/biquad_alt.rs†L1-L205】
- `src/silk/lp_variable_cutoff.rs` ports the variable cut-off low-pass filter that ramps bandwidth transitions by interpolating the elliptic coefficient tables, mirroring `silk/LP_variable_cutoff.c`.【src/silk/lp_variable_cutoff.rs†L1-L137】【opus-c/silk/LP_variable_cutoff.c†L32-L134】
- `src/silk/hp_variable_cutoff.rs` mirrors the adaptive high-pass cut-off controller from `silk/HP_variable_cutoff.c`, exposing the trimmed `EncoderStateCommon` plus `hp_variable_cutoff` so voiced-frame pitch statistics can update the smoothed cut-off entirely in Rust.【src/silk/hp_variable_cutoff.rs†L1-L162】【opus-c/silk/HP_variable_cutoff.c†L1-L76】
- `src/silk/control_snr.rs` mirrors the bitrate-to-SNR tuning helper from `silk/control_SNR.c`, porting the empirical lookup tables and updating the encoder state's target bitrate and `SNR_dB_Q7` fields so the residual quantiser sees the same quality setting as the C reference.【src/silk/control_snr.rs†L1-L80】【opus-c/silk/control_SNR.c†L35-L112】
- `src/silk/vad.rs` mirrors the multi-band SILK VAD from `silk/VAD.c`, handling the four-band analysis filterbank, noise tracking, and speech-activity smoothing so encoder modules can update their speech quality metrics entirely in Rust.【src/silk/vad.rs†L1-L287】【opus-c/silk/VAD.c†L1-L233】
- `src/silk/resampler_rom.rs` provides the coefficient ROM shared by SILK's fixed-point resamplers, mirroring the lookup tables from `silk/resampler_rom.c` and `silk/resampler_rom.h`.【src/silk/resampler_rom.rs†L1-L182】
- `src/silk/bwexpander.rs` mirrors the chirp-based LPC bandwidth expander from `silk/bwexpander.c`, applying the fixed-point helper that shrinks LPC magnitudes during prediction setup.【src/silk/bwexpander.rs†L1-L83】【opus-c/opus-main/silk/bwexpander.c†L34-L49】
- `src/silk/bwexpander_32.rs` ports the 32-bit variant of the LPC bandwidth-expansion helper from `silk/bwexpander_32.c`, applying the same chirp logic to full-precision predictor coefficients used in resampling and analysis paths.【src/silk/bwexpander_32.rs†L1-L66】【opus-c/opus-main/silk/bwexpander_32.c†L34-L51】
- `src/silk/bwexpander_flp.rs` mirrors the floating-point bandwidth expander from `silk/float/bwexpander_FLP.c`, chirping LPC predictors with a scalar `chirp` factor so FLP analysis helpers can stay within Rust.【src/silk/bwexpander_flp.rs†L1-L62】【opus-c/silk/float/bwexpander_FLP.c†L34-L49】
- `src/silk/burg_modified.rs` mirrors the fixed-point Burg LPC analysis used across the encoder, reproducing the headroom tracking, pitch cross-correlation, and inverse-gain limiting from `silk/fixed/burg_modified_FIX.c` so that later LPC helpers can reuse the same predictor coefficients in Rust.【src/silk/burg_modified.rs†L1-L330】【opus-c/silk/fixed/burg_modified_FIX.c†L35-L280】
- `src/silk/check_control_input.rs` validates the encoder control structure prior to encoding, mirroring `silk/check_control_input.c` and returning the same `SilkError` codes when parameters fall outside the supported ranges.【src/silk/check_control_input.rs†L1-L166】【opus-c/opus-main/silk/check_control_input.c†L35-L110】
- `src/silk/cng.rs` ports the SILK comfort-noise generator, exposing `CngState`, `PlcState`, and the `apply_cng` helper that smooths NLSFs/gains and synthesises Q14 noise during packet loss, matching the behaviour of `silk/CNG.c`.【src/silk/cng.rs†L1-L210】【opus-c/silk/CNG.c†L36-L190】
- `src/silk/plc.rs` mirrors `silk_PLC` and `silk_PLC_glue_frames`, rebuilding the voiced/unvoiced concealment paths, pitch-drift limiter, attenuation ramps, and energy glue logic so that decoder-side PLC state can be updated entirely in Rust. The optional Deep PLC callbacks remain stubbed until the neural model is ported.【src/silk/plc.rs†L1-L400】【opus-c/silk/PLC.c†L1-L494】
- `src/silk/control_audio_bandwidth.rs` mirrors the sampling-rate state machine from `silk/control_audio_bandwidth.c`, updating the encoder’s low-pass transition state, bandwidth-switch handshake flags, and frame bit budget so Opus can safely change internal sample rates.【src/silk/control_audio_bandwidth.rs†L13-L186】【opus-c/silk/control_audio_bandwidth.c†L35-L132】
- `src/silk/control_codec.rs` mirrors `silk/control_codec.c`, wiring together resampler resets, bandwidth selection, complexity tuning, packet-loss handling, and low-bit-rate redundancy so the Rust encoder follows the same control flow as the reference `silk_control_encoder`.【src/silk/control_codec.rs†L1-L346】【opus-c/silk/control_codec.c†L33-L418】
- `src/silk/debug.rs` mirrors the optional timing and debug-data helpers from `silk/debug.c`/`debug.h`, exposing timer snapshots and data sinks behind the `silk_tic_toc` and `silk_debug` Cargo features so instrumentation can be toggled just like the reference macros.【src/silk/debug.rs†L1-L396】【opus-c/silk/debug.c†L36-L165】【opus-c/silk/debug.h†L34-L261】

The existing Rust implementation therefore covers only a subset of the full SILK decoder pipeline and omits all encoder- and platform-specific code.

## C Module Inventory

### Public API and State Management
- `API.h` declares the public encoder and decoder entry points (`silk_Encode`, `silk_Decode`) plus lifecycle helpers for sizing, initialising, and resetting codec state, alongside the externally visible control structures.【22c9aa†L37-L121】
- `enc_API.c` wires the high-level encoder API, exposing `silk_Encode` and driving channel/state transitions, VAD hooks, and configuration updates.【29ff48†L18-L66】
- `dec_API.c` implements the matching decoder super-structure (`silk_decoder`) and API functions such as `silk_LoadOSCEModels`, `silk_Get_Decoder_Size`, `silk_ResetDecoder`, `silk_InitDecoder`, and `silk_Decode`, orchestrating per-channel decode calls and packet handling; Rust now mirrors these helpers via `src/silk/load_osce_models.rs`, `src/silk/get_decoder_size.rs`, `src/silk/init_decoder.rs`, and the new top-level driver in `src/silk/dec_api.rs`.【49e9b1†L1-L120】【src/silk/load_osce_models.rs†L1-L36】【src/silk/get_decoder_size.rs†L1-L23】【src/silk/init_decoder.rs†L1-L58】【src/silk/dec_api.rs†L1-L420】
- `structs.h` defines the comprehensive encoder and decoder state structures (`silk_encoder_state`, `silk_decoder_state`, `silk_decoder_control`) that hold buffers, configuration, PLC/CNG state, entropy indices, and architecture-specific metadata.【6988cc†L1-L60】【9c7ced†L1-L56】Rust mirrors these via `src/silk/decoder_state.rs` and the encoder hierarchy in `src/silk/encoder/state.rs`, though the public encoder API has yet to consume the new scaffolding.【src/silk/decoder_state.rs†L21-L225】【src/silk/encoder/state.rs†L134-L472】
- `init_encoder.c` and `init_decoder.c` set up and reset codec state, manage sample-rate transitions, and enforce buffer invariants during initialisation.【1cceb7†L1-L40】`src/silk/init_decoder.rs` now ports the decoder reset/init routines, while the encoder initialisation path remains C-only.
- `decoder_set_fs.c` is now mirrored by `src/silk/decoder_set_fs.rs`, leaving only the encoder initialisation routines unported on this front.【src/silk/decoder_set_fs.rs†L1-L220】【608c41†L1-L52】

Rust still lacks equivalents for the remaining public C API wrappers even though the decoder and encoder super-structures they operate on are now mirrored in Rust via `src/silk/decoder_state.rs` and `src/silk/encoder/state.rs`.【src/silk/decoder_state.rs†L21-L225】【src/silk/encoder/state.rs†L134-L472】

### Decoder Pipeline
- `decode_frame.c` sequences the SILK frame decode by invoking index, pulse, parameter, and core reconstruction stages, then updates PLC/CNG state and output buffers.【adaec1†L1-L80】
- `decode_core.c`, `decode_parameters.c`, `decode_pitch.c`, and `decode_pulses.c` contain the detailed algorithms that unpack side information, reconstruct gains and predictor coefficients, decode pitch contours, and run the inverse noise-shaping quantiser; Rust now mirrors each helper so the side-information decoding and inverse NSQ stages execute entirely in safe code.【src/silk/decode_core.rs†L1-L320】【src/silk/decode_parameters.rs†L1-L222】【src/silk/decode_pitch.rs†L1-L90】【src/silk/decode_pulses.rs†L1-L210】
- `PLC.c` and `PLC.h` implement packet-loss concealment, while `CNG.c` performs comfort-noise generation that depends on decoder state.【f552ca†L1-L94】【a5a877†L1-L64】
- The fixed-point VAD is now available via `src/silk/vad.rs`, leaving PLC/CNG and the higher-level decoder drivers as the remaining gaps in the Rust decoder coverage.【src/silk/vad.rs†L1-L287】

The Rust decoder implements only a slice of this logic: the top-level `silk_decode_frame` orchestration remains unported even though the range-decoder side information, pulse expansion, inverse NSQ, VAD, PLC, and CNG helpers now exist in Rust; until `decode_frame` lands, `decoder.rs` continues to bypass PLC and comfort-noise glue.【src/silk/decode_indices.rs†L1-L275】【src/silk/decode_pulses.rs†L1-L210】【src/silk/decode_core.rs†L1-L320】【src/silk/vad.rs†L1-L287】【src/silk/plc.rs†L1-L400】【src/silk/cng.rs†L1-L210】

### Encoder Pipeline
- `enc_API.c` delegates to encoder control helpers like `control_codec.c`, `control_SNR.c`, `control_audio_bandwidth.c` (now mirrored by `src/silk/control_audio_bandwidth.rs`), `check_control_input.c`, and gain/pitch analysis routines spread across `NSQ.c` and `NSQ_del_dec.c`. These files handle bandwidth switching, rate control, long-term prediction updates, and noise-shaping quantisation.【f1c0fa†L1-L64】【57d235†L1-L60】【da49cd†L1-L74】【7b30e4†L1-L56】【760d41†L1-L68】【7f3cdd†L1-L76】【cbc6a2†L1-L120】【src/silk/control_audio_bandwidth.rs†L13-L90】
- `encode_pulses.c` and numerous files in `fixed/` and `float/` provide the forward (encoder) versions of the entropy coding, LSF quantisation, and signal analysis pipeline; `encode_indices.c` and `encode_pulses.c` now have Rust counterparts, but the remaining helpers stay C-only.【7cf3d9†L1-L108】【424aff†L1-L88】【a500cb†L1-L80】【c56351†L1-L88】【src/silk/encode_indices.rs†L1-L240】【src/silk/encode_pulses.rs†L1-L271】

Rust currently mirrors only selected encoder-side helpers (`check_control_input.rs`, `control_audio_bandwidth.rs`, `find_ltp.rs`, `encode_indices.rs`, `gain_quant.rs`, `init_encoder.rs`, `quant_ltp_gains.rs`, `nlsf_encode.rs`/`nlsf_del_dec_quant.rs`, and the stereo predictor modules); the top-level encoder control flow, NSQ/NSQ-del-dec logic, and range-coding drivers listed above remain unported.

### Signal Processing Libraries
- The `fixed/` directory implements fixed-point DSP kernels for the encoder and decoder, including LPC/LTP analysis, pitch detection, residual energy estimation, and vector operations.【424aff†L1-L88】【a500cb†L1-L96】
- The `float/` directory mirrors these routines with floating-point implementations used in certain build configurations.【c56351†L1-L88】
- Platform-specific optimisations under `arm/`, `x86/`, `mips/`, and `xtensa/` provide SIMD kernels and specialised math headers.【c0a208†L1-L80】【4e0c2f†L1-L96】【cbc6a2†L1-L120】【880630†L1-L80】

These support libraries are prerequisites for a full port; while helpers like `vector_ops`, `regularize_correlations`, `warped_autocorrelation`, the LPC finder (`src/silk/find_lpc.rs`), and the predictor builder (`src/silk/find_pred_coefs.rs`) now exist in Rust,【src/silk/find_lpc.rs†L1-L120】【src/silk/find_pred_coefs.rs†L1-L243】 other LPC/LTP analysis kernels such as `find_pitch_lags_FIX` and `pitch_analysis_core_FIX` remain C-only.

### Resampling and Utility Modules
- `resampler.c`, `resampler_private_*.c`, `resampler_rom.c`, and `resampler_structs.h` implement the multi-stage resamplers used on the encoder side and for decoder bandwidth transitions.【77a597†L1-L120】【723e57†L1-L100】
- Helper utilities such as `sum_sqr_shift.c`, `interpolate.c`, `log2lin.c`, and table files (`tables_*.c`) supply math helpers and lookup data; Rust now mirrors the `sum_sqr_shift`, `log2lin`, `interpolate`, `tables_pitch_lag`, `tables_pulses_per_block`, `tables_gain`, `table_LSF_cos`, and wideband NLSF codebook helpers via `src/silk/sum_sqr_shift.rs`, `src/silk/log2lin.rs`, `src/silk/interpolate.rs`, `src/silk/tables_pitch_lag.rs`, `src/silk/tables_pulses_per_block.rs`, `src/silk/tables_gain.rs`, `src/silk/table_lsf_cos.rs`, and `src/silk/tables_nlsf_cb_wb.rs`, but other lookup tables stay in C.【28a6dc†L1-L44】【a6d7bc†L1-L48】【src/silk/sum_sqr_shift.rs†L1-L101】【src/silk/log2lin.rs†L1-L71】【src/silk/interpolate.rs†L1-L74】【src/silk/tables_pitch_lag.rs†L1-L29】【src/silk/tables_pulses_per_block.rs】【src/silk/tables_gain.rs†L1-L31】【src/silk/table_lsf_cos.rs†L1-L26】【src/silk/tables_nlsf_cb_wb.rs†L1-L260】
- `sort.c` and its floating-point companion `float/sort_FLP.c` are now mirrored by `src/silk/sort.rs`, providing the insertion-sort routines used across decoder helpers regardless of precision.【src/silk/sort.rs†L1-L221】【opus-c/silk/sort.c†L40-L135】【opus-c/silk/float/sort_FLP.c†L39-L83】

Rust now mirrors the resampler orchestration, high-quality upsampler, fractional downsampler, and shared AR helper through `src/silk/resampler.rs`, `src/silk/resampler_down2.rs`, `src/silk/resampler_down2_3.rs`, `src/silk/resampler_private_up2_hq.rs`, `src/silk/resampler_private_iir_fir.rs`, `src/silk/resampler_private_down_fir.rs`, and `src/silk/resampler_private_ar2.rs`, leaving only the encoder-specific resampler variants in C.【src/silk/resampler.rs†L1-L353】【src/silk/resampler_down2.rs†L1-L82】【src/silk/resampler_down2_3.rs†L1-L170】【src/silk/resampler_private_up2_hq.rs†L1-L120】【src/silk/resampler_private_iir_fir.rs†L1-L238】【src/silk/resampler_private_down_fir.rs†L1-L213】【src/silk/resampler_private_ar2.rs†L1-L34】

### Stereo, Bandwidth Extension, and Optional Features
- Stereo prediction, MS/LR transforms, and predictor quantisation live in `stereo_*.c`, while the remaining bandwidth extension logic relies on files such as `LP_variable_cutoff.c` and `tuning_parameters.h`. Optional OSCE support is wired through additional headers referenced by the decoder API. The adaptive high-pass smoother from `HP_variable_cutoff.c` is now mirrored by `src/silk/hp_variable_cutoff.rs`, though the broader stereo/bandwidth pipeline is still C-only.【6e5ae6†L1-L44】【03d532†L1-L60】【src/silk/hp_variable_cutoff.rs†L1-L162】
- Architecture-specific noise-shaping and vectorisation code extends many of these features for NEON, SSE4.1, AVX2, and other targets.【cbc6a2†L1-L160】

These stereo/bandwidth-extension paths remain largely unported despite the new high-pass helper.

## Missing Functions and Types

| Kind | C definition | Purpose | Rust status |
| --- | --- | --- | --- |
| Function | `silk_Encode` (`enc_API.c`) | Top-level frame encode driver managing buffers, transitions, and range coding.【29ff48†L20-L66】 | Not ported; Rust tree lacks encoder entry points.【src/silk/mod.rs†L1-L16】 |
| Function | `silk_ResetDecoder` / `silk_InitDecoder` (`dec_API.c`) | Reset and initialisation routines for multi-channel decoder state.【1cceb7†L1-L40】【d0e901†L1-L28】 | `src/silk/init_decoder.rs` now mirrors both helpers for a single channel; the multi-channel wrapper in `dec_API.c` still needs to be ported.【src/silk/init_decoder.rs†L1-L58】 |
| Function | `silk_Decode` (`dec_API.c`) | High-level frame decode orchestration including PLC and stereo handling.【d0e901†L15-L112】 | Partially covered by `Decoder::decode`, but PLC/stereo paths are absent.【src/silk/decoder.rs†L949-L1206】 |
| Function | `silk_decode_pulses` (`decode_pulses.c`) | Expands entropy-coded pulse data into excitation vectors.【b563fc†L1-L78】 | Partially mirrored by `Decoder::decode_excitation` and the standalone shell coder, but there is no Rust analogue to the combined entry point yet.【src/silk/decoder.rs†L1143-L1314】【src/silk/shell_coder.rs†L1-L164】 |
| Type | `silk_encoder_state` (`structs.h`) | Full encoder working state including buffers, resamplers, and entropy indices.【6988cc†L1-L60】 | Mirrored by `EncoderStateCommon`, `EncoderChannelState`, and the multi-channel `Encoder` wrapper in `src/silk/encoder/state.rs`, though no encoder lifecycle API drives them yet.【src/silk/encoder/state.rs†L134-L472】 |
| Type | `silk_decoder_state` (`structs.h`) | Decoder state with LPC buffers, PLC/CNG members, and channel metadata.【9c7ced†L1-L36】 | `src/silk/decoder_state.rs` now mirrors the C layout (including the PLC scratch struct), but the high-level `Decoder` wrapper still uses a reduced field set for the current decode pipeline.【src/silk/decoder_state.rs†L21-L225】【src/silk/decoder.rs†L82-L160】 |
| Type | `silk_decoder_control` (`structs.h`) | Holds decoded predictor coefficients, gains, and LTP parameters for synthesis.【9c7ced†L36-L48】 | Mirrored by `DecoderControl` in `src/silk/decoder_control.rs`, which is now reused by the parameter decoder, PLC, CNG, and inverse NSQ helpers.【src/silk/decoder_control.rs†L1-L34】【src/silk/decode_parameters.rs†L1-L210】 |

This inventory highlights that the Rust port currently implements only portions of the SILK decoder’s entropy and LPC reconstruction logic. The remaining decoder orchestration, PLC/CNG support, encoder pipeline, and supporting DSP libraries still need to be translated from the C sources.
